# 开发计划 Phase 1.3.0: 显化进化——视觉反馈与意图表达

## 1. 目标 (Goals)
将底层的物理属性、基因演化和 AI 决策过程可视化。让玩家能够直观地通过颜色、形态和 UI 反馈感知游戏世界的运行闭环。

- **基因表达**: 通过颜色和尺寸直观展示个体差异。
- **意图显化**: 让 AI 的原子动作序列可见，揭示“思考过程”。
- **物理反馈**: 强化受力与损坏的视觉表现。

## 2. 关键任务 (Key Tasks)

### T1: 基因特征着色 (Genetic Tinting & Scaling)
- [ ] **攻击性映射**: 将 `Genome.aggression` 映射到 `Sprite.color` 的红色分量。
- [ ] **代谢/饮食映射**: 通过 Hue 值区分“红肉掠食者（红色）”与“绿色光合者（绿色）”。
- [ ] **尺寸联动**: 确保 `Genome.size` 严格驱动 `Transform.scale`（已初步实现，需全局校验）。

### T2: 决策链可视化 (Decision Chain UI)
- [ ] **逻辑气泡**: 当单位执行原子动作时，在其头顶显示当前动作缩写（例如 `MOV`, `CON`, `FRC`）。
- [ ] **意图连线**: 在调试模式下，从 AI 连线到其当前原子动作的目标（Target）。
- [ ] **需求槽升级**: 改进侧边栏信息面板，显示 `Energy` 存储的动态进度条以及欲望权重。

### T3: 物理冲突视觉反馈 (Physics Feedback)
- [ ] **受力动效**: 在 `ApplyForce` 成功触发时，为目标实体添加微小的 `ScreenShake`（局部）。
- [ ] **破损表达**: 当 `PhysicalBody.health` 下降时，通过 Shader 或颜色灰度化展示物质结构的崩溃。
- [ ] **演化之星**: 为 `Generation > 10` 的个体添加特殊的粒子效果或光环。

### T4: Z-Level 深度感增强 (Depth Perception)
- [ ] **下层模糊**: 优化 `update_visibility`，让下方层不仅变暗，还略微缩小尺寸以模拟透视感。
- [ ] **垂直切面 UI**: 增加一个 UI 组件显示当前 Z 层在世界垂直空间的相对比例。

## 3. 技术调整
- **组件更新**: 增加 `VisualFeedback` 组件用于处理短期动效。
- **系统更新**: `src/rendering/visibility_system.rs` 引入更多基因参数。
- **UI 更新**: `src/rendering/interface.rs` 增加数据绑定逻辑。

## 4. 预期产物
- 玩家不再需要在代码里查看基因数值，只需看一眼地图：那群红色的大家伙正在疯狂追逐绿色的快速小人，而你可以看到它们头顶不断闪过 `MOV` 和 `FRC` 的思考过程。
